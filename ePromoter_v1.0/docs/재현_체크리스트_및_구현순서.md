# 재현 체크리스트 및 구현 순서

대시보드를 다른 환경에서 재구현할 때 **API 호출 순서**와 **필수 체크 항목**을 한 페이지로 정리한 문서입니다.

---

## 1. 전체 흐름

```
로그인 (POST /login)
  → 메인 (/globaldashboard/main)
    → Summary 메뉴 클릭
      → getCountry (Region 목록)
      → getSiteCode (Local/Site 목록)
      → [메뉴별] Data API 호출
      → [메뉴별] Graph API 호출 (동일 body)
      → 테이블·차트 렌더링
```

---

## 2. Summary 페이지 로드 시 API 호출 순서

| 순서 | API | 용도 |
|------|-----|------|
| 1 | `POST /ajax/getCountry` | Region 체크박스 (rhqArray, title) |
| 2 | `POST /ajax/getSiteCode` | Local/Site 체크박스 (localArray, title) |
| 3 | (일부 메뉴) `getChatType` 또는 `getHybrisType` | 채팅/Hybris 타입 옵션 |
| 4 | **Data API** (메뉴별) | 테이블·요약 데이터 |
| 5 | **Graph API** (메뉴별) | 차트 데이터 |

- **Update** 클릭 시: 4 → 5 만 동일 파라미터로 재호출.
- 요청 body: `title`, `from`, `to`, `period`, `site_code`, `period_date`, `switch_table` 등 (메뉴별 상이).  
  → 실제 값은 `analysis/menu_*.json`의 `apis_this_page[].post_data` 또는 `replication/schemas/request_filter_common.json` 참고.

---

## 3. 메뉴별 필수 API (경로만)

| 메뉴 | Data/Table API | Graph API |
|------|----------------|-----------|
| Executive Summary | getExecutiveData | getExecutiveGraphData |
| Division Summary | getDivisionData, getDivisionTableData | getDivisionGraphData |
| Sales Summary | getSalesSummaryDataNew | getSalesSummaryGraphDataNew |
| Operation Summary | getOperationDataNew, getOperationTableData | getOperationAllGraphData |
| ShopApp Summary | getShopAppOperationSummaryData, getOperationTableData | getOperationAllGraphData |
| Bot/AI Summary | getBotJourneyOperationSummaryData, getOperationTableData | getOperationAllGraphData |
| EPP/SMB Summary | getOperationData, getOperationTableData | getOperationGraphData |
| Retailer Summary | getRetailerOperationData | getRetailerOperationGraphData |
| MX Flagship Summary | getFlagshipPreTableData | — |
| Performance Summary | getPerformanceFunnelData, getPerformanceTrafficTableData, getPerformanceMissedChatTableData, getPerformanceHandledChatTableData | — |

상세 경로: `replication/config/menu_config.json`, `api_endpoints.json`.

---

## 4. 재현 전 체크리스트

- [ ] **로그인**  
  POST /login (user_id, user_pw), 세션 쿠키 유지
- [ ] **getCountry / getSiteCode**  
  요청·응답 형식 확인, Region/Local/Site UI 바인딩
- [ ] **메뉴별 Data/Graph API**  
  요청 body 스키마, 응답 구조 확인 (`analysis/api_responses/*.json`, `table_api_spec.json`, `graph_api_spec.json`)
- [ ] **필터 연동**  
  기간(from/to), period, site_code, switch_table 등이 API body에 반영되는지
- [ ] **테이블·차트**  
  테이블 헤더는 `table_headers`, 차트는 Google Charts 등으로 Graph API 응답 연동
- [ ] **다운로드**  
  필요 시 CommonExcelDownload 등 form/API 연동
- [ ] **공통 UI**  
  Update, Log out, Change Password (필요 시)

---

## 5. 참고 문서

- API 경로·메뉴 설정: `replication/config/menu_config.json`, `api_endpoints.json`
- 테이블/그래프 → API 역참조: `docs/테이블_그래프_API_역참조_명세.md`, `analysis/table_api_spec.json`, `analysis/graph_api_spec.json`
- 요청 body 예시: `replication/schemas/request_filter_common.json`, `analysis/menu_*.json` 내 `apis_this_page`
- 응답 샘플: `analysis/api_responses/*.json`

*상세 구현: MANUAL_02(로그인), MANUAL_03(레이아웃), MANUAL_04(메뉴별), MANUAL_05(API 레퍼런스)*
